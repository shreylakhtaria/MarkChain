# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type NonceResponse {
  nonce: String!
  message: String!
}

type UserInfo {
  walletAddress: String!
  did: String!
  role: UserRole!
  name: String
  email: String
}

"""User roles in the system"""
enum UserRole {
  STUDENT
  TEACHER
  ADMIN
}

type AuthResponse {
  accessToken: String!
  user: UserInfo!
}

type UserDto {
  _id: ID!
  walletAddress: String!
  did: String!
  role: UserRole!
  name: String
  studentId: String
  isActive: Boolean!
  lastLogin: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
  otp: String
  otpExpiry: DateTime
  isVerified: Boolean
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type OTPResponseDto {
  success: Boolean!
  message: String!
  email: String
}

type VerifyOTPResponseDto {
  success: Boolean!
  message: String!
  user: UserDto
}

type EmailOTPResponseDto {
  success: Boolean!
  message: String!
  email: String
}

type VerifyEmailOTPResponseDto {
  success: Boolean!
  message: String!
  user: UserDto
}

type HealthCheckResponse {
  status: String!
  timestamp: String!
  uptime: Float!
  version: String!
  environment: String!
}

type SystemInfoResponse {
  success: Boolean!
  message: String!
  nodeVersion: String!
  platform: String!
  architecture: String!
  totalMemory: String!
  freeMemory: String!
  uptime: Float!
}

type HashResponse {
  success: Boolean!
  message: String!
  hash: String!
  algorithm: String!
  originalData: String!
}

type ValidateDIDResponse {
  success: Boolean!
  message: String!
  isValid: Boolean!
  did: String!
  method: String
  network: String
}

type BlockchainCredential {
  ipfsHash: String!
  issuer: String!
  updatedAt: String!
  studentName: String
  subject: String
  grade: String
  blockchainTxHash: String
}

type BlockchainUserStatus {
  walletAddress: String
  didHash: String
  blockchainRole: String
  didRegistered: Boolean!
  hasBlockchainRole: Boolean!
  assignedSubjects: [String!]!
}

type NetworkInfo {
  contractAddress: String!
  walletAddress: String!
  network: String!
  chainId: String!
  isConnected: Boolean!
}

type TransactionResponse {
  success: Boolean!
  transactionHash: String
  message: String
  error: String
}

type SubjectResponse {
  _id: String!
  subjectName: String!
  blockchainHash: String!
  isActive: Boolean!
  createdBy: String
  description: String
  credits: Float
  createdAt: String!
  updatedAt: String!
}

type ComponentResponse {
  _id: String!
  componentName: String!
  subjectName: String!
  blockchainHash: String!
  isActive: Boolean!
  createdBy: String
  weightage: Float
  maxMarks: Float
  createdAt: String!
  updatedAt: String!
}

type SubjectWithComponentsResponse {
  txHash: String!
  success: Boolean!
  subject: SubjectResponse!
}

type ComponentWithTxResponse {
  txHash: String!
  success: Boolean!
  component: ComponentResponse!
}

type CredentialTxResponse {
  success: Boolean!
  txHash: String!
  ipfsHash: String!
  message: String
}

type AssignBlockchainRoleResponse {
  success: Boolean!
  message: String!
  txHash: String
}

type TeacherSubjectDto {
  _id: String!
  teacherDID: String!
  teacherWalletAddress: String!
  teacherName: String!
  subjectCode: String!
  subjectName: String!
  academicYear: String!
  semester: String!
  batches: [String!]!
  department: String
  isActive: Boolean!
  assignedBy: String
  assignedAt: DateTime
  createdAt: DateTime!
  updatedAt: DateTime!
}

type AdminRevokeCredentialResponse {
  success: Boolean!
  message: String!
  credentialId: String
}

type ExamScheduleDto {
  _id: String!
  subject: String!
  examName: String!
  examType: String!
  examDate: DateTime!
  duration: Float!
  totalMarks: Float!
  passingMarks: Float!
  venue: String!
  teacherDID: String!
  academicYear: String!
  semester: String!
  batch: String!
  status: String!
  description: String
  isActive: Boolean!
  createdAt: DateTime!
  updatedAt: DateTime!
}

type StudentByBatchDto {
  _id: String!
  walletAddress: String!
  did: String!
  name: String!
  studentId: String!
  email: String
  isActive: Boolean!
  batch: String
}

type NotificationDto {
  _id: String!
  recipientDID: String!
  recipientWalletAddress: String!
  type: String!
  title: String!
  message: String!
  metadata: String
  isRead: Boolean!
  readAt: DateTime
  senderDID: String
  senderWalletAddress: String
  relatedEntityId: String
  relatedEntityType: String
  createdAt: DateTime!
}

type MarkNotificationReadResponse {
  success: Boolean!
  message: String!
}

type CourseSetupDto {
  totalSubjects: Float!
  totalBatches: Float!
  totalStudents: Float!
  subjects: [SubjectInfoDto!]!
}

type SubjectInfoDto {
  _id: String!
  subjectCode: String!
  subjectName: String!
  academicYear: String!
  semester: String!
  batches: [String!]!
  department: String
}

type UploadMarksResponse {
  success: Boolean!
  message: String!
  credentialId: String
  vcHash: String
}

type TeacherStudentDto {
  _id: String!
  walletAddress: String!
  did: String!
  name: String!
  studentId: String!
  email: String
  batch: String
  isActive: Boolean!
}

type TeacherCredentialDto {
  _id: String!
  studentDID: String!
  studentName: String!
  subject: String!
  marks: Float!
  grade: String
  examType: String!
  academicYear: String!
  semester: String!
  isRevoked: Boolean!
  blockchainTxHash: String
  ipfsHash: String
  createdAt: DateTime!
}

type Query {
  me: String!
  getUsersByRole(role: UserRole!): [UserDto!]!
  getUserProfile(walletAddress: String!): UserDto!
  getAllUsers: [UserDto!]!
  healthCheck: HealthCheckResponse!
  getSystemInfo: SystemInfoResponse!
  validateDID(validateDIDDto: ValidateDIDDto!): ValidateDIDResponse!
  generateNonce: String!
  validateTimestamp(timestamp: Float!, maxAgeMs: Float! = 300000): Boolean!
  getMyBlockchainStatus: BlockchainUserStatus!
  getMyAssignedSubjects: [String!]!
  getMySubjectCredential(subject: String!): BlockchainCredential
  getMyBlockchainCredentials: [BlockchainCredential!]!
  verifyBlockchainCredential(input: VerifyCredentialInput!): BlockchainCredential
  getBlockchainNetworkInfo: NetworkInfo!
  testIPFSConnection: Boolean!
  getAllSubjects: [SubjectResponse!]!
  getSubjectComponents(subjectName: String!): [ComponentResponse!]!
  getAllTeacherSubjects: [TeacherSubjectDto!]!
  getTeacherSubjectsByTeacher(teacherWalletAddress: String!): [TeacherSubjectDto!]!
  getAllExamSchedules: [ExamScheduleDto!]!
  getExamScheduleById(examId: String!): ExamScheduleDto!
  getStudentsByBatch(batch: String!): [StudentByBatchDto!]!
  getMyNotifications(limit: Int): [NotificationDto!]!
  getUnreadNotificationsCount: Int!
  getTeacherCourseSetup: CourseSetupDto!
  getTeacherStudents(batch: String): [TeacherStudentDto!]!
  getTeacherCredentials(subject: String): [TeacherCredentialDto!]!
}

input ValidateDIDDto {
  did: String!
}

input VerifyCredentialInput {
  studentAddress: String!
  subject: String!
}

type Mutation {
  generateNonce(walletAddress: String!): NonceResponse!
  verifySignature(input: VerifySignatureInput!): AuthResponse!
  updateUserProfile(input: UpdateUserProfileDto!): UserDto!
  sendOTPForVerification(input: SendOTPDto!): OTPResponseDto!
  verifyOTPAndUpdateProfile(input: VerifyOTPDto!): VerifyOTPResponseDto!
  sendEmailOTPForProfile(input: SendEmailOTPDto!): EmailOTPResponseDto!
  verifyEmailOTPAndUpdateProfile(input: VerifyEmailOTPDto!): VerifyEmailOTPResponseDto!
  hashData(hashDataDto: HashDataDto!): HashResponse!
  sanitizeString(input: String!): String!
  assignBlockchainRole(input: AssignBlockchainRoleInput!): AssignBlockchainRoleResponse!
  assignSubjectToTeacher(input: SubjectAssignmentInput!): TransactionResponse!
  removeSubjectFromTeacher(input: SubjectAssignmentInput!): TransactionResponse!
  revokeBlockchainCredential(input: RevokeCredentialInput!): TransactionResponse!
  linkWalletAddress(input: LinkWalletInput!): TransactionResponse!
  registerUserDID(input: RegisterDIDInput!): TransactionResponse!
  issueBlockchainCredential(input: IssueBlockchainCredentialInput!): TransactionResponse!
  createSubject(input: CreateSubjectInput!): SubjectWithComponentsResponse!
  registerComponent(input: RegisterComponentInput!): ComponentWithTxResponse!
  createNewCredential(input: CreateCredentialInput!): CredentialTxResponse!
  createTeacherSubject(input: CreateTeacherSubjectInput!): TeacherSubjectDto!
  updateTeacherSubject(input: UpdateTeacherSubjectInput!): TeacherSubjectDto!
  deleteTeacherSubject(subjectId: String!): AssignBlockchainRoleResponse!
  revokeCredential(input: AdminRevokeCredentialInput!): AdminRevokeCredentialResponse!
  createExamSchedule(input: CreateExamScheduleInput!): ExamScheduleDto!
  updateExamSchedule(input: UpdateExamScheduleInput!): ExamScheduleDto!
  deleteExamSchedule(examId: String!): AssignBlockchainRoleResponse!
  markNotificationAsRead(input: MarkNotificationReadInput!): MarkNotificationReadResponse!
  markAllNotificationsAsRead: MarkNotificationReadResponse!
  deleteNotification(notificationId: String!): MarkNotificationReadResponse!
  uploadMarks(input: UploadMarksInput!): UploadMarksResponse!
}

input VerifySignatureInput {
  walletAddress: String!
  signature: String!
  nonce: String!
}

input UpdateUserProfileDto {
  name: String
  studentId: String
}

input SendOTPDto {
  studentId: String!
}

input VerifyOTPDto {
  otp: String!
  name: String!
  studentId: String!
}

input SendEmailOTPDto {
  email: String!
  name: String
}

input VerifyEmailOTPDto {
  email: String!
  otp: String!
  name: String
}

input HashDataDto {
  data: String!
  algorithm: String! = "sha256"
}

input AssignBlockchainRoleInput {
  userWalletAddress: String!
  role: String!
}

input SubjectAssignmentInput {
  teacherAddress: String!
  subject: String!
}

input RevokeCredentialInput {
  studentAddress: String!
  subject: String!
}

input LinkWalletInput {
  walletAddress: String!
}

input RegisterDIDInput {
  did: String!
}

input IssueBlockchainCredentialInput {
  studentAddress: String!
  subject: String!
  credentialData: String!
}

input CreateSubjectInput {
  subjectName: String!
  description: String
  credits: Int
  transactionHash: String!
}

input RegisterComponentInput {
  subjectName: String!
  componentName: String!
  weightage: Float
  maxMarks: Float
}

input CreateCredentialInput {
  studentAddress: String!
  subjectName: String!
  credentialData: String!
  validityPeriod: Float = 31536000
}

input CreateTeacherSubjectInput {
  teacherWalletAddress: String!
  subjectCode: String!
  subjectName: String!
  academicYear: String!
  semester: String!
  batches: [String!]!
  department: String
}

input UpdateTeacherSubjectInput {
  subjectId: String!
  subjectCode: String
  subjectName: String
  academicYear: String
  semester: String
  batches: [String!]
  department: String
  isActive: Boolean
}

input AdminRevokeCredentialInput {
  credentialId: String!
  reason: String
}

input CreateExamScheduleInput {
  subject: String!
  examName: String!
  examType: String!
  examDate: DateTime!
  duration: Float!
  totalMarks: Float!
  passingMarks: Float!
  venue: String!
  teacherWalletAddress: String!
  academicYear: String!
  semester: String!
  batch: String!
  description: String
}

input UpdateExamScheduleInput {
  examId: String!
  subject: String
  examName: String
  examType: String
  examDate: DateTime
  duration: Float
  totalMarks: Float
  passingMarks: Float
  venue: String
  teacherWalletAddress: String
  status: String
  description: String
}

input MarkNotificationReadInput {
  notificationId: String!
}

input UploadMarksInput {
  studentWalletAddress: String!
  subject: String!
  marks: Float!
  examType: String!
  academicYear: String!
  semester: String!
  grade: String
  institution: String
}